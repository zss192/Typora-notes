# 绪论

## 知识点

1.操作系统(Operating System即OS)：指控制和管理整个计算机系统的硬件和软件资源，并合理的组织调度计算机的工作和资源的分配，以提供给用户和其他软件方便的接口的环境。它是计算机系统中的最基本的系统软件。

2.操作系统的特征

- 并发性(最基本的特征)
  - 并发：交替发生(宏观同时发生微观交替发生)；并行：同时进行
- 共享性(最基本的特征)
  - 互斥共享：一个时间段内只允许一个进程访问
  - 同时访问：一个时间段内允许多个进程"同时"访问(微观上看仍是交替访问)
- 虚拟性：把一个物理上(实际存在)的实体变为若干个逻辑上(感觉存在)的对应物
  - 时分复用技术：利用处理机的空闲时间运行其他程序,提高处理机的利用率
  - 空分复用技术：利用存储器的空闲空间存放其他程序,提高内存的利用率
- 异步性：进程以不可预知的速度向前推进

3.操作系统的五大基本功能

> 由于功能描述较多，前四个的分类有印象即可(了解后可帮助理解)

- **处理器管理**：处理器的分配和运行是**以进程为单位**的，因此也是对进程的管理
  - 进程控制：负责进程的创建、撤销及状态转换
  - 进程同步：对并发执行的进程进行协调
  - 进程通信：负责完成进程间的信息交换
  - 进程调度：按一定算法进行处理器分配
- **存储器管理**：对内存进行分配、保护、和扩充
  - 内存分配：按一定的策略为每道程序分配内存
  - 内存保护：保证各程序互不干扰的运行
  - 内存扩充：为允许大型作业的运行，必须借助虚拟存储技术获得增加内存的效果
- **设备管理**：对计算机系统内的所有设备实施有效管理
  - 设备分配：按一定的分配原则对设备进行分配
  - 设备传输控制：实现物理的输入/输出操作
  - 设备独立性：用户程序中的设备与实际使用的物理设备无关
- **文件管理**：负责信息管理
  - 文件存储空间管理：负责存储空间的分配与回收
  - 目录管理：目录是为方便文件管理而设的数据结构能按名存取
  - 文件操作管理：实现文件操作，负责文件读写
  - 文件保护：提供文件保护功能
- **用户接口**：为方便用户使用操作系统而设
  - 命令接口：提供一组命令供用户控制自己的作业
    - 联机命令(交互式)：说一句做一句
    - 脱机命令(批处理)：说一堆一起做
  - 系统调用：用户向OS提出各种服务要求(如磁盘文件操作)
  - 图形接口：如Windows、安卓、IOS

4.操作系统的形成

> 各阶段的优点主要是解决了上一阶段的主要缺点

- 手工操作阶段：将纸带装入输入机，程序运行完成用户取走纸带
  - 缺点：用户独占全机、人机速度矛盾导致资源利用率极低
- 批处理阶段
  - 单道批处理系统：引入脱机输入/输出(通过中间设备减少CPU等待输入输出时间)技术，并监督程序(OS的雏形)负责控制作业的输入、输出
    - 优点：缓解了一定程度的人机速度矛盾，资源利用率有所提升
    - 缺点：内存中仅有一道程序运行，CPU大量时间空闲等待I/O完成，资源利用率依然很低
    - 特点：自动性(作业依次自动运行)、顺序性、单道性
  - 多道批处理系统：每次可往内存中输入多道程序。（**操作系统正式诞生**）
    - 优点：多道程序并发执行，共享计算机资源，资源利用率大幅提升。
    - 缺点：用户响应时间长，没有人机交互功能(提交作业后只能等待完成，不能自主控制作业执行)
    - 特点：脱机使用PC、成批处理(分批次)、多道程序运行

5.操作系统的分类

- 批处理操作系统：包括单道批处理OS和多道批处理OS(详见上)
- 分时操作系统：以时间片为单位轮流为各个作业服务，各用户可通过终端与计算机交互
  - 优点：解决人机交互问题，允许多用户同时使用一台计算机，且操作相互独立。
  - 缺点：不能优先处理一些紧急任务，OS对各个作业完全公平，不区分任务紧急性。
  - 特点：多路性(多用户)、交互性、独占性(好像自己独占)、及时性
- 实时操作系统：对外部输入能在**规定时间内**(注意这里的实时不是马上而是规定时间(s/ms/us级))处理完毕并做出反应
  - 硬实时系统：必须在规定时间内完成(如导弹控制系统)
  - 软实时系统：能接受偶尔违反时间规定(如12306订票系统)
  - 特点：及时性、可靠性
- 其他操作系统
  - 嵌入式OS：运行在嵌入式系统环境中，如各种电器
  - 网络OS：把网络中各计算机互联=连起来，实现资源共享、信息交换
  - 分布式OS：各计算机地位相同(自治性)，工作由它们并行、协同完成且对用户透明

6.两种指令、处理器状态、程序

- 特权指令：不允许用户直接使用的指令，如I/O指令、中断屏蔽指令、清内存指令
- 非特权指令：普通的运算指令

- 核心态(管态)：能执行一切指令，能访问所有寄存器和存储器
- 用户态(目态)：只执行非特权指令，访问指定的寄存器和存储器
- 内核程序：系统的管理者，可执行一切指令、运行在核心态
- 应用程序：普通用户程序只能执行非特权指令，运行在用户态

> 助记：类似于Linux系统下的root用户和一般用户

7.操作系统的内核：操作系统最基本最核心的部分

- 时钟管理：实现计时功能
- 中断处理：负责实现中断机制
- 原语：一种特殊的程序
  - 处于操作系统最底层，最接近硬件
  - 运行具有原子性，**只能一气呵成，不能中断**
  - 运行时间短、调用频繁
- 系统资源的管理：进程管理、存储器管理、设备管理

8.中断：为实现多道程序并发执行而引入的一种技术(因I/O请求暂停执行时，可转去运行其它程序)，是CPU**从用户态进入核心态的唯一途径**

- 内中断：也称异常，由错误引起，信号来自内部
- 外中断：系统正常操作，如外设请求，信号来自外部

9.系统调用：系统给程序员(应用程序)提供的唯一接口，可获得OS的服务。在用户态发生，核心态处理

程序接口：由一组系统调用组成，进一步封装。

> 如今的应用程序通过**高级语言提供**的库函数间接进行系统调用，在用户态运行。

10.用户执行系统调用的过程：先传递系统调用所需参数，通过陷入(trap)指令进入核心态，然后执行相应服务程序，最后返回用户态。

11.操作系统的体系结构

- 大内核：将OS的主要功能模块作为系统内核

  - 优点：高性能
  - 缺点：内核代码庞大，结构混乱，难以维护

- 微内核：只保存基本的功能在内核

  - 优点：结构清晰，便于维护，可靠性高
  - 缺点：需频繁在核心态和用户态切换，性能低

  > 助记：管理层越多自然性能越高，但会导致分工不明确即结构混乱

## 习题

1.操作系统提供给编程人员的接口是（C）

A.库函数	B.高级语言	C.系统调用	D.子程序

答：程序员通过调用操作系统提供的**系统调用函数**来使用操作系统提供的服务。

而库函数是由**程序设计语言提供**的，它不是操作系统提供的接口。

2.在单处理机系统中，可并行的是（ D ）。

Ⅰ  进程与进程   Ⅱ  处理机与设备  Ⅲ  处理机与通道  Ⅳ  设备与设备

A.Ⅰ、Ⅱ和Ⅲ	B.Ⅰ、Ⅱ和Ⅳ

C.Ⅰ、Ⅲ和Ⅳ	D.Ⅱ、Ⅲ和Ⅳ

答：注意是并行即同时运行，而又是单处理机即单核，则同一时刻只能运行一个进程，但多个进程可以并发即交替的运行。

处理器、通道、设备都能并行运行，比如同时打印(设备)、计算(处理器)、传输数据(通道)

3.一个多道批处理系统中仅有  P1  和  P2  两个作业，  P2  比  P1  晚  5ms  到达，它们的计算和  I/O  操作顺序如下：

P1  ：计算  60ms  ，  I/O 80ms  ，计算  20ms

P2  ：计算  120ms  ，  I/O 40ms  ，计算  40ms

若不考虑调度和切换时间，则完成两个作业需要的时间最少是（B）

A.240ms	B.260ms	C.340ms	D.360ms

答：由于P2晚到，所以P1先执行

![image-20201210172938859](https://cdn.jsdelivr.net/gh/zss192/Typora-notes@master/images/image-20201210172938859.png)

> 特别注意的是多道只是并发即交替执行，同一时刻CPU还是只能处理一个计算过程，但可以同时计算机处理I/O操作

4.下列选项中，不可能在用户态发生的事件是（C）

A.系统调用	B.外部中断	C.进程切换	D.缺页

答：系统调用本来就是操作系统提供给用户使用的接口，所以自然是由用户使用

外部中断比如用户敲击键盘，会产生外部中断，也是在用户态发生的

缺页会产生缺页中断，也是会发生在用户态下

而进程切换比如挂起一个正在运行的进程，显然用户是没有这个权限的，实质上需要修改程序状态字，且全程在核心态执行

# 进程管理

## 知识点

1.











## 习题
















































