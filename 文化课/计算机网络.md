# 计算机网络体系结构

## 知识点

1.计算机网络：是一个将分散的、具有独立功能的计算机系统，通过通信设备与线路连接起来，由功能完善的软件实现资源共享和信息传递的系统

2.计算机网络的组成

- 物理组成上看可分为硬件、软件、协议(可理解为一种规则)。
- 工作方式上看可分为**边缘部分**(由主机组成)和**核心部分**(由网络和路由器组成,为边缘部分提供服务)。
- 逻辑功能上看可分为通信子网(数据传输和通信)和资源子网(终端、资源和服务)。
  - 通信子网包括物理层、数据链路层和网络层。

3.计算机网络的功能

- **数据通信**(最基本和最重要的功能)
  - 包括流量控制、路由选择、传输控制
- 资源共享：可共享硬件、软件、数据
- 分布式处理：多个主机各自承担同一任务的不同部分，如Hadoop
- 信息综合处理：将分散的数据集中处理或分级处理
- 负载均衡：将工作任务均衡的分配给网络中各计算机
- 提高可靠性：网络中个计算机可通过网络互为替换机

4.计算机网络的分类

![image-20201207083410816](https://cdn.jsdelivr.net/gh/zss192/Typora-notes@master/images/image-20201207083410816.png)

其中按范围划分

| 局域网 | 几千米内如学校 |
| ------ | -------------- |
| 城域网 | 一个城市       |
| 广域网 | 一个国家或大洲 |

5.计算机网络为什么要采用分层结构：各层之间相互独立、灵活性好、易于实现和标准化。

> 助记：一个公司如果非常大肯定要分部门工作，但要只有两三个人就没必要细分了。

6.协议：一种规则用来控制**两个对等**(同一层)实体通信。

- 语义：规定格式
- 语法：规定功能
- 同步：规定执行顺序

7.接口：**上层使用下层**服务的入口即服务访问点(SAP)（类似于程序里的接口）

8.服务：下层为相邻上层提供的功能调用。(协议是水平的而服务是垂直的)

> 助记：肯定是你为领导服务

- 面向连接的服务和面向无连接的服务
  - 连接：通信前先建立连接比较可靠如TCP；无连接：不连接直接发速度快但可能丢包如UDP
- 可靠服务(数据一定准确送达)和不可靠服务(尽力而为)
- 有应答服务(收到数据后给发送方说下)和无应答服务（了解）

9.下一层对上一层提供的服务对上一层透明

> 透明：打游戏你负责玩就行，你不用知道这游戏是咋实现的

10.OSI七层结构

![image-20201207091242863](https://cdn.jsdelivr.net/gh/zss192/Typora-notes@master/images/image-20201207091242863.png)

![image-20201207172709968](https://cdn.jsdelivr.net/gh/zss192/Typora-notes@master/images/image-20201207172709968.png)

![image-20201207172709969](https://cdn.jsdelivr.net/gh/zss192/Typora-notes@master/images/4039680_1523328974264_E4E1F3318AF5F32719A15808E8D8458B)

11.OSI5层结构总结

|              | 应用层                                 | 传输层                                                  | 网络层                                                       | 数据链路层                                              | 物理层                       |
| ------------ | -------------------------------------- | ------------------------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------- | ---------------------------- |
|              | 用户对用户(端到端)                     | 应用对应用；进程对进程(**端到端**)                      | 主机对主机(点到点)                                           | 点到点                                                  | 点到点                       |
| 传输单位     | ——                                     | 报文段(TCP)或用户数据报(UDP)                            | IP数据报                                                     | 帧                                                      | 比特                         |
| 所实现的硬件 | ——                                     | ——                                                      | 路由器                                                       | 交换机、网桥                                            | 集线器、中继器               |
| 任务         | 提供系统与用户的接口(如QQ)             | 负责主机中两个进程之间的通信                            | 1.将传输层传来的报文段封装成分组;2.选择适当的路由使分组能够交付到目的主机 | 将网络层传来的IP数据报组装成帧                          | 透明的传输比特流             |
| 功能         | 1.文件传输;2.访问和管理;3.电子邮件服务 | 1.可靠传输、不可靠传输;2.流量控制;3.差错控制;4.复用分用 | 1.路由选择;2.流量控制;3.差错控制;4.拥塞控制                  | 1.成帧(定义开始和结束);2.差错控制;3.流量控制;4.访问控制 | 为数据端设备提供传送数据通路 |
| 协议         | FTP、SMTP、POP3、HTTP                  | TCP、UDP、ARQ                                           | ICMP、ARP、RARP、IP、IGMP                                    | PPP、HDLC                                               | ——                           |

12.OSI参考模型和TCP/IP模型对比

| OSI参考模型                   | TCP/IP模型                                       |
| ----------------------------- | ------------------------------------------------ |
| 3个主要概念：服务、接口、类型 | 没有明确区分服务、接口、类型                     |
| 产生在协议发明之前            | 产生在协议发明之后                               |
| 共有7层                       | 一定是4层(一般教材为了更好的讲解才按5层模型讲解) |
| 网络层：连接和无连接          | 网络层：仅有无连接                               |
| 传输层：仅有面向连接          | 传输层：面向连接和无连接                         |

13.计算机网络性能指标

- 带宽：网络设备可支持的最高速度(b/s)
- 时延：数据从一端传到另一端所需要的时间
  - 发送时延(传输时延)：从**发送数据**第一位到最后一位发送完毕所需时间
    - 发送时延 = 数据帧长度(bit)  /  发送速率(bit/s)
  - 传播时延：电磁波在**信道中传播**一定距离所需时间
    - 传播时延 = 信道长度(m)  /  电磁波在信道上的传播速度(m/s)
  - 排队时延：在输入和输出队列中**排队等待处理**所需时间
  - 处理时延：主机或路由器收到分组进行处理所需时间
  - 总时延 = 发送时延+传播时延+排队时延+处理时延
- 时延带宽积：又称以比特为单位的链路长度即某段链路现有多少比特(容量)
  - 时延带宽积(bit) = 传播时延(s) x 带宽(bit/s)
- 往返时延(RTT)：数据发送后来回跑一趟的时间
  - 往返时延 = 2x传播时延+末端处理时间
- 信道利用率 = 有数据通过时间  /  (有+无)数据通过时间
- 网络利用率：信道利用率加权平均值

## 习题

1.下列选项中，不属于网络体系结构所描述的内容是（C）

A.网络的层次	B.每一层使用的协议	C.协议的内部实现细节	D.每一层必须完成的功能

答：层次、协议、完成的功能教材均有提及，内部细节这是工作人员去实现就行

2.下列属于通信子网的是（A）

I.网桥	II.交换机	III.计算机软件	IV.路由器

A. I、II、IV		B. II、III、IV	......

答：通信子网是负责通信的而且只包括物理层、数据链路层、网络层。计算机软件显然不是用于通信的工具也不在那三层里面，它属于资源子网。

3.局域网和广域网之间的差异是（D）

A.所使用的传输介质不同		B.所覆盖的范围不同

C.所使用的协议不同		D.B和C

答：我们都知道他俩范围肯定不一样。至于协议不同是因为广域网范围更广，信号可靠度不高就要采取一系列差错控制、流量控制等手段，而局域网信道质量较好主要实现信道复用和提高速度就行。传输介质可能都是光纤。

4.下列说法错误的是（C）

I.广播式网络一般只包含3层，即物理层、数据链路层和网络层
II. Internet 的核心协议是TCP/IP
III.在Internet中，网络层的服务访问点是端口号

A. I、II、III	B. III	C. I、III	D. I、II

答：广播式网络谁都发不存在路由选择的问题，所以没有网络层

网络层的服务访问点是IP地址，传输层的服务访问点才是端口号

5.在n个节点的星型拓扑结构中，有（A）条物理链路

A.n-1	B.n	C.nx(n-1)	D.nx(n+1)/2

答：星型拓扑是中间一个点与外边一圈的点相连，所以是n-1

而在型拓扑结构中是n条链路

6.在TCP/IP体系结构中，**直接**为ICMP提供服务的协议是（B）

A．PPP	B．IP	C．UDP	D．TCP

答：网际控制报文协议ICMP是TCP/IP体系结构网络层中的一个协议，ICMP报文需要使用IP协议封装为IP数据报，因此可以认为直接为ICMP提供服务的协议是IP协议。

PPP协议在TCP/IP体系结构中属于最底层协议，也就是网络接口层协议；在OSI体系中属于数据链路层协议，所以PPP协议为网络层提供服务，但并不能认为PPP直接为ICMP提供服务。

UDP和TCP都属于传输层协议，它们为应用层提供服务。

> 本题关键字在于“直接“，一般协议都是为上一层提供服务

7.在OSI参考模型中，下列功能需由应用层的相邻层实现的是（B）

A．对话管理			B．数据格式转换

C．路由选择			D．可靠数据传输

答：应用层的相邻层是表示层。表示层的任务主要是数据字符集的转换、数据格式化、文本压缩、数据加密以及解密等工作。

选项A中的**对话**管理，是**会话**层实现的功能；

选项C中的路由选择，是网络层实现的功能；

选项D中的可靠数据传输，是传输层实现的功能。

8.在下列情况下，计算传送1000KB文件所需的总时间，即从开始传送时起知道文件的最后以为到达目的地为止的时间。假设往返时间RTT为100ms，一个分组是1KB（即1024B）的数据，在开始传送整个文件数据之前进行的起始握手过程需要2RTT的时间。

（1）带宽是1.5Mb/s，数据分组可连续发送
（2）带宽是1.5Mb/s，但在发送完每一个数据分组之后，必须等待一个RTT，才能发送下一个数据分组
（3）假设带宽无限大，即发送时间为0，但是在等待每个RTT后可以发送多达20个分组

答：(1)：总时延 = 发送时延 + 传播时延 + 握手时延

发送时延 = 1000KB/1.5Mb/s = 5.46s	（注意单位换算）

> 1.5Mb/s=1.5x10^6^b/s=(1.5x10^6^/8)B/s=(1.5x10^6^/8/1024)KB/s

传播时延 = RTT/2=100ms/2 = 50ms
握手时延 = 2*RTT=200ms

总时延=5.46s+0.05s+0.2s=5.71s

> 发送时延可想象成豌豆射手吐完所有豌豆所需时间
>
> 传播时延是这些吐出来的豌豆去打僵尸的路上所花的时间

(2)：发送完一个分组等一个RTT，总共有1000个分组在(1)的基础上加上999RTT即可(发第1000个分组后就发完了不用再等了)。

总时延=5.71s+999x0.1s=105.61s

(3)：总时延 = 发送时延 + 传播时延 + 等待时延 + 握手时延

①发送时延本题为0，而握手时延为固定值2RTT

一共1000分组，一次能发20分组，需要发50次

②等待时延：从发第二次到第五十次发送前都要等一个RTT即49RTT

③传播时延：第一次发后数据需要0.5RTT才能到达目的地，但与此同时这0.5RTT时间内第二次发送也在等待一个RTT。

由于我们已经计算过等待时延，所以不用额外加上这些传播时延。

而第五十次发送后由于是最后一次发送所以需要加上0.5RTT的传播时延。

> t=0：第一次发送，t=0.5RTT第一次发送的数据到达目的地，t=1RTT，第二次发送数据，......t=49RTT，第五十次发送，t=49.5RTT，第五十次发送的数据到达目的地

所以总时延=2RTT+49RTT+0.5RTT=51.5RTT=5.15s

# 物理层

## 知识点

1.物理层解决如何在各种传输媒体传输数据比特流，而不是指具体的传输媒体。(记住每个层都没有实体就ok)\

2.物理层主要任务：确定与传输媒体接口有关的一些特性(定义标准)

- 机械特性：规定所采用的规格、接口形状、引脚数量等情况
- 电气特性：规定传输过程中的电压范围、传输速率、距离限制等
  - 如+10V ~ +15V 表示二进制数据 0 ，电线长度在15m以内
- 功能特性：描述 电平 的意义 , 接口部件 信号线用途
  - 如一个接口的引脚处于高电平的含义
- 过程特性(规程特性)：规定各个物理线路工作规程 , 时序关系 

3.基带传输对应数字信号(0和1用电压表示)，宽带传输对应模拟信号(连续变化的)

![image-20201212190029799](https://cdn.jsdelivr.net/gh/zss192/Typora-notes@master/images/image-20201212190029799.png)

4.数据传输方式

- 串行传输：一个比特一个比特的传输（远距离常用）
- 并行传输：多个比特通过多个信道同时传输（近距离常用）

通信方式

- 同步通信：发送端和接收端的时钟频率相等（技术复杂，效率高，贵）
- 异步通信：发送端发完一个发送单位即字节后，可过任意时间发下一个（价格低）

通信模式

- 单工：只有一个方向的通信，需一条信道（如广播）
- 半双工：双方都可以发或接，但不能同时发和接，需两条信道（如对讲机）
- 全双工：双方可同时发和接，需两条信道（如打电话）

5.码元：用一个固定时长的信号波形代表不同的离散数值的基本波形，而1码元可携带多个比特的信息

> 如二进制有两种码元即0和1，而4进制则有00、01、10、11四中码元

6.速率：即传输速率，有两种描述形式

- 波特率：也称码元速率，表示每秒可传输多少个码元，单位为波特(B)
- 比特率：也称信息传输速率，表示每秒可传输多少个比特，单位为比特每秒(b/s)

> 关系：若一个码元携带2bit信息，则3B波特率对应比特率为3x2 bit/s

7.带宽：单位时间内所能通过的最高数据率，单位比特每秒(bit/s)（数字信号中）

> 可理解为大马路有多宽

模拟信号中的带宽表示允许通过的最高频率减最低频率

8.奈氏准则：理想低通(**无噪声**、带宽受限)条件下，为了避免码间串扰(码元之间失去清晰界限)存在一个极限数据传输率
$$
Cmax=2*W*log2N (bit/s)
$$


> 其中W为带宽HZ，N为几种码元或每个码元的离散电平的数目
>
> 奈氏准则只给出了码元传输速率的限制并没有给出信息传输速率的限制
>
> f~采样~≥2f~信号最高频率~，而f~采样~=2*W

9.信号越强，噪声的影响就越小，因此只考虑其中一方是没有意义的，所以求信噪比才有意义

> 其中S为信号的平均功率，N为噪声的平均功率

$$
信噪比(dB)=10*log10(S/N) (dB)
$$

10.香农定理：在宽带受限且**有噪声**的信道中，为了不产生误差，信息的传输速率有上限值

> 其中W为带宽(Hz)，S/N为信噪比(dB)

$$
Cmax=W*log2(1+S/N) (bit/s)
$$

通过公式我们可知道

- 信道中宽带或信噪比越大，信息的极限传输速率越高
- 对于一定的带宽和信噪比，信息的传输速率上限就确定了
- 只要信息的传输速率低于极限传输速率，就一定能找到某种方法实现无差错的传输
- 实际信道的传输速率要比极限速率低不少

11.奈氏准则指出了码元传输的速率是受限的(内忧)，而香农定理给出了信息传输速率的极限(外患)

![image-20201212201158273](https://cdn.jsdelivr.net/gh/zss192/Typora-notes@master/images/image-20201212201158273.png)





## 习题

1.在无噪声的情况下,若某通信链路的带宽为3kHz,采用4个相位,每个相位具有4种振幅的QAM调制技术,则该通信链路的最大数据传输率是多少?

答：题目中说无噪声所以用奈氏准则求解

4个相位,每个相位具有4种振幅所以有16种码元即N=16

C~max~=2\*3k\*log~2~16=24kb/s（注意公式中带宽的单位为HZ）

2.电话系统的典型参数是信道带宽为3000Hz,信噪比为30dB,则该系统的最大数据传输率为（C）
A. 3kbit/s		B. 6kbit/s		C. 30kbit/s		D. 64kbit/s

答：电话系统的信道是有噪声的信道，所以用香农定理求解

香农公式用到了S/N，而我们已知了信噪比，先求S/N

10log~10~(S/N)=30，所以S/N=1000

C~max~ = 3000\*log~2~(1+S/N) = 3000\*log~2~(1+1000) ≈ 30kbit/s

> 注意S/N并不是信噪比，一般题目都是给信噪比我们要先求S/N